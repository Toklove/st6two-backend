import{u as R,r as k,c as z,$ as c,d as i,e as h,f as t,z as A,w as a,F as b,h as B,k as r,V as J,l as d,m as D,J as W,p as G,q as F,i as H,x as K,j as v,t as y,v as M,D as O}from"./index-fcbdad1f.js";import{_ as Q,F as X,a as Y}from"./layout.daec25cc.js";import{_ as Z}from"./page-meta.8634b088.js";import{c as ee,_ as te}from"./device.d443bdbe.js";import{_ as ae}from"./icon-edit-avator.68ad5f80.js";import{U as se}from"./sub-section.222bbc93.js";import{_ as le}from"./_plugin-vue_export-helper.c27b6911.js";const V="./static/images/icon-del.png";const ne={market:ee([{left:18,right:365,top:36,bottom:220,width:128,height:23,type:"rect"},{left:18,right:365,top:66,bottom:220,width:90,height:24,type:"rect"},{left:340,right:365,top:48,bottom:220,width:26,height:26,type:"round"}])};const oe={__name:"wallet",setup(ce){const{t:p}=R(),_=k(!1);function f(e){O({title:e,icon:"none"})}function $(){c.back()}const u=k(0),m=k([]),x=k([]);async function j(){if(_.value=!0,u.value===0){const e=await c.get("/user/cryptoList");e.code===1&&(m.value=e.data)}else{const e=await c.get("/user/bankList");e.code===1&&(x.value=e.data)}_.value=!1}function C(e){if(!e){f(p("mine.wallet.DeleteFailed"));return}u.value===0?I(e):S(e)}function N(e){if(e.length<8)return e;const n=e.slice(0,4),o=e.slice(-4),s="*".repeat(e.length-8);return n+s+o}function T(){u.value===0?L("/pages/mine/addWallet"):L("/pages/mine/addBank")}async function I(e){if((await c.post("/user/delCrypto",{id:e})).code===1){f("Delete success");const o=await c.get("/user/cryptoList");o.code===1&&(m.value=o.data)}else f(p("mine.wallet.DeleteFailed"))}async function S(e){if((await c.post("/user/delBank",{id:e})).code===1){f(p("mine.wallet.DeleteSuccess"));const o=await c.get("/user/bankList");o.code===1&&(x.value=o.data)}else f(p("mine.wallet.DeleteFailed"))}function U(){return[{name:p("mine.wallet.Purse")},{name:p("mine.wallet.BankCard")}]}function L(e){G({url:e})}return z(async()=>{_.value=!0;const e=await c.get("/user/cryptoList");e.code===1&&(m.value=e.data);const n=await c.get("/user/bankList");n.code===1&&(x.value=n.data),_.value=!1}),(e,n)=>{const o=B(F("page-meta"),Z),s=H,g=K,q=B(F("fui-skeleton"),te),w=M,E=Q;return i(),h(b,null,[t(o),A("div",{class:"init-top"}),t(E,{"class-name":"IndexRouter"},{default:a(()=>[t(X,{custom:""},{default:a(()=>[t(s,{class:"flex justify-center relative items-center flex-1"},{default:a(()=>[t(s,{class:"absolute left-0"},{default:a(()=>[t(Y,{name:"arrowleft",onClick:$})]),_:1}),t(s,{class:"absolute right-[16px]",onClick:T},{default:a(()=>[t(g,{class:"w-[27px] h-[27px]",src:ae})]),_:1}),t(se,{modelValue:r(u),"onUpdate:modelValue":n[0]||(n[0]=l=>J(u)?u.value=l:null),list:U(),"active-color":"white","button-color":"#3640f0",class:"w-[350px]",rounded:"",onChange:j},null,8,["modelValue","list"])]),_:1})]),_:1}),r(_)?(i(),d(s,{key:0,class:"mt-[20px] mx-[34px]"},{default:a(()=>[t(s,null,{default:a(()=>[t(s,{class:"relative flex items-center justify-between mb-[20px] w-[682px] h-[210px] market-skeleton pt-[40px] px-[24px]"},{default:a(()=>[t(q,{preloadList:r(ne).market,outerClass:"market-skeleton"},null,8,["preloadList"])]),_:1})]),_:1})]),_:1})):(i(),d(s,{key:1,class:"mt-[20px] mx-[34px]"},{default:a(()=>[r(m).length>0&&r(u)===0?(i(),d(s,{key:0,class:"wallet-list"},{default:a(()=>[(i(!0),h(b,null,D(r(m),l=>(i(),d(s,{key:l.id,class:"flex items-center justify-between mb-[20px] px-[39px] wallet-item"},{default:a(()=>[t(s,{class:"flex flex-col text-white"},{default:a(()=>[t(w,{class:"text-[34px]"},{default:a(()=>[v(y(l.currency.name),1)]),_:2},1024),t(w,{class:"mt-[10px] text-[40px] font-bold"},{default:a(()=>[v(y(l.address),1)]),_:2},1024)]),_:2},1024),t(g,{class:"w-[45px] h-[45px]",src:V,onClick:P=>C(l.id)},null,8,["onClick"])]),_:2},1024))),128))]),_:1})):r(x).length>0&&r(u)===1?(i(),d(s,{key:1,class:"wallet-list"},{default:a(()=>[(i(!0),h(b,null,D(r(x),l=>(i(),d(s,{key:l.id,class:"flex items-center justify-between mb-[20px] px-[39px] wallet-item"},{default:a(()=>[t(s,{class:"flex flex-col text-white"},{default:a(()=>[t(w,{class:"text-[34px]"},{default:a(()=>[v(y(l.bank_name),1)]),_:2},1024),t(w,{class:"mt-[10px] text-[40px] font-bold"},{default:a(()=>[v(y(N(l.account)),1)]),_:2},1024)]),_:2},1024),t(g,{class:"w-[45px] h-[45px]",src:V,onClick:P=>C(l.id)},null,8,["onClick"])]),_:2},1024))),128))]),_:1})):W("v-if",!0)]),_:1}))]),_:1})],64)}}},me=le(oe,[["__scopeId","data-v-b129e7e8"]]);export{me as default};

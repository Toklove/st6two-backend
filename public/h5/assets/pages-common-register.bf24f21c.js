import{r as x,u as B,H as E,$ as w,d as T,e as I,f as e,w as n,F as $,h as U,i as D,j as v,t as h,k as t,J as p,K as Y,L as j,D as y,G as L,s as N,E as R,q as S,v as q,x as A,I as F}from"./index-077585d0.js";import{_ as J,l as K}from"./layout.86a0f20e.js";import{_ as G}from"./page-meta.bf08dab4.js";import{_ as H}from"./icon-email.c485b8d6.js";import{_ as b}from"./icon-password.43cb9a3e.js";import{_ as z}from"./icon-code.c850328e.js";import{_ as M}from"./icon-invite.9f2e3d27.js";import{_ as O}from"./_plugin-vue_export-helper.c27b6911.js";const Q={__name:"register",setup(W){const u=x(!0),f=x(!0),{t:l}=B(),o=x({email:"",password:"",password_confirmation:"",code:"",invite_code:"",captcha:"",captcha_config:{}});function _(c){y({title:c,icon:"none"})}function V(){Y(),w.get("/captcha").then(c=>{o.value.captcha_config=c.data,j()})}async function k(){const c=["email","password","password_confirmation","code","invite_code"],s=[l("common.register.PleaseEnterYourEmail"),l("common.register.PleaseEnterYourPassword"),l("common.register.PleaseEnterYourConfirmPassword"),l("common.register.PleaseEnterYourVerificationCode"),l("common.register.PleaseEnterYourInviteCode")];for(let r=0;r<c.length;r++)if(!o.value[c[r]]){_(s[r]);return}if(o.value.password!==o.value.password_confirmation){_(l("common.register.TheTwoPasswordsAreInconsistent"));return}o.value.captcha=o.value.captcha_config.key;const{code:g,data:a,message:m}=await w.post("/auth/register",o.value);if(console.log(a),g!==1){await y({title:m,icon:"none"});return}L.set("token",a.access_token),_(l("common.register.RegisterSuccessfully")),N({url:"/pages/tabbar/home"})}E(c=>{console.log(c),c.invite_code&&(o.value.invite_code=c.invite_code),w.get("/captcha").then(s=>{o.value.captcha_config=s.data})});const C=x({showTopBar:!0,topBarBgColor:"transparent",showTopBarBackBtn:!0,topBarTitle:l("common.register.Back"),className:"text-white",backIconColor:"white"});return R(K,C),(c,s)=>{const g=U(S("page-meta"),G),a=D,m=q,r=A,d=F,P=J;return T(),I($,null,[e(g),e(a,{class:"init-top"}),e(P,{"class-name":"IndexRouter"},{default:n(()=>[e(a,{class:"px-[50px]"},{default:n(()=>[e(a,{class:"mt-[84px] flex flex-col text-white"},{default:n(()=>[e(m,{class:"text-[70px] font-bold"},{default:n(()=>[v(h(t(l)("common.register.Register")),1)]),_:1}),e(m,{class:"text-[26px] mt-[18px]"},{default:n(()=>[v(h(t(l)("common.register.SignUpToJoin")),1)]),_:1})]),_:1}),e(a,{class:"form-wrap mt-[79px]"},{default:n(()=>[e(a,{class:"flex items-center p-[28px] bg-[#f5f7f9] rounded-[20px]"},{default:n(()=>[e(r,{class:"w-[44px] h-[44px]",src:H}),e(d,{modelValue:t(o).email,"onUpdate:modelValue":s[0]||(s[0]=i=>t(o).email=i),placeholder:t(l)("common.register.Email"),class:"flex-1 ml-[19px] input",type:"text"},null,8,["modelValue","placeholder"])]),_:1}),e(a,{class:"flex items-center p-[28px] mt-[30px] bg-[#f5f7f9] rounded-[20px]"},{default:n(()=>[e(r,{class:"w-[44px] h-[44px]",src:b}),e(a,{class:"flex items-center justify-between flex-1"},{default:n(()=>[e(d,{modelValue:t(o).password,"onUpdate:modelValue":s[1]||(s[1]=i=>t(o).password=i),type:t(u)?"password":"text",class:"flex-1 ml-[19px] input",placeholder:t(l)("common.register.Password")},null,8,["modelValue","type","placeholder"]),e(r,{src:t(u)?"/static/images/icon-off.png":"/static/images/icon-on.png",class:"w-[36px] h-[36px]",onClick:s[2]||(s[2]=i=>u.value=!t(u))},null,8,["src"])]),_:1})]),_:1}),e(a,{class:"flex items-center p-[28px] mt-[30px] bg-[#f5f7f9] rounded-[20px]"},{default:n(()=>[e(r,{class:"w-[44px] h-[44px]",src:b}),e(a,{class:"flex items-center justify-between flex-1"},{default:n(()=>[e(d,{modelValue:t(o).password_confirmation,"onUpdate:modelValue":s[3]||(s[3]=i=>t(o).password_confirmation=i),type:t(f)?"password":"text",class:"flex-1 ml-[19px] input",placeholder:t(l)("common.register.ConfirmPassword")},null,8,["modelValue","type","placeholder"]),e(r,{src:t(f)?"/static/images/icon-off.png":"/static/images/icon-on.png",class:"w-[36px] h-[36px]",onClick:s[4]||(s[4]=i=>f.value=!t(f))},null,8,["src"])]),_:1})]),_:1}),e(a,{class:"flex items-center p-[28px] mt-[30px] bg-[#f5f7f9] rounded-[20px]"},{default:n(()=>[e(r,{class:"w-[44px] h-[44px]",src:z}),e(a,{class:"flex items-center justify-between flex-1"},{default:n(()=>[e(d,{modelValue:t(o).code,"onUpdate:modelValue":s[5]||(s[5]=i=>t(o).code=i),class:"flex-1 ml-[19px] input",placeholder:t(l)("common.register.VerificationCode"),type:"text"},null,8,["modelValue","placeholder"]),e(a,{class:"w-[160px]",onClick:V},{default:n(()=>[e(r,{src:t(o).captcha_config.img,class:"w-full h-[40px]"},null,8,["src"])]),_:1}),p("                        <view "),p('                            class="w-[100px] text-[22px] rounded-[20px] text-center bg-black text-white py-[8px]" '),p('                            @click="send" '),p("                        > "),p("                            {{ timer ?? t('common.forget.Send') }} "),p("                        </view> ")]),_:1})]),_:1}),e(a,{class:"flex items-center p-[28px] mt-[30px] bg-[#f5f7f9] rounded-[20px]"},{default:n(()=>[e(r,{class:"w-[44px] h-[44px]",src:M}),e(d,{modelValue:t(o).invite_code,"onUpdate:modelValue":s[6]||(s[6]=i=>t(o).invite_code=i),class:"flex-1 ml-[19px] input",placeholder:t(l)("common.register.InvitationCode"),type:"text"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),e(a,{class:"btn-wrap text-center"},{default:n(()=>[e(a,{class:"bg-black py-[33px] rounded-[20px]",onClick:k},{default:n(()=>[e(m,{class:"text-[32px] font-bold text-white"},{default:n(()=>[v(h(t(l)("common.register.Register")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}},le=O(Q,[["__scopeId","data-v-5a6d7605"]]);export{le as default};
